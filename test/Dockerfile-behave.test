# Notable references
# - http://www.projectatomic.io/blog/2014/09/running-syslog-within-a-docker-container/

FROM python:3
LABEL application="behave_test"

# Run as non root user
RUN useradd --no-log-init --no-create-home --uid 1000 --user-group behave
USER behave

# Install dependencies (TODO: improve with python requirements.txt)
RUN pip install behave && \
    pip install requests && \
    pip install pyhamcrest && \
    pip install jmespath && \
    pip install rfc5424-logging-handler && \
    pip install kafka-python && \
    pip install confluent-kafka

VOLUME /tmp/test
WORKDIR /tmp/test
CMD ["behave", "--junit", "--junit-directory", "/tmp/test/behave/reports", "behave/features"]
